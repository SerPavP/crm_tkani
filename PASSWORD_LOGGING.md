# Логирование паролей в CRM системе

## Описание
Система автоматически записывает все измененные пароли пользователей в файл `pass.txt` в корне проекта.

## Файл логов
- **Расположение**: `pass.txt` (в корне проекта)
- **Кодировка**: UTF-8
- **Формат**: `Дата Время - Пользователь (Роль): Пароль`

## Функции, которые записывают пароли

### 1. Смена пароля пользователя (Админ)
- **URL**: `/finances/change-user-password-page/`
- **Функция**: `change_user_password()` в `finances/views.py`
- **Доступ**: Только администраторы

### 2. Смена пароля администратора
- **URL**: `/finances/change-admin-password-page/`
- **Функция**: `change_admin_password()` в `finances/views.py`
- **Доступ**: Только администраторы

### 3. Простая смена пароля
- **Функция**: `change_password()` в `finances/views.py`
- **Доступ**: Только администраторы

### 4. Пересоздание пользователя
- **Функция**: `recreate_user()` в `finances/views.py`
- **Доступ**: Только администраторы
- **Особенность**: Добавляет пометку "ПЕРЕСОЗДАН"

## Пример записи в файле
```
# Лог паролей пользователей CRM системы
# Формат: Дата Время - Пользователь (Роль): Пароль
2025-07-30 06:47:37 - Пользователь admin (Администратор): new_password123
2025-07-30 06:48:15 - Пользователь manager (Менеджер): manager_pass456
2025-07-30 06:49:22 - Пользователь accountant (Бухгалтер) - ПЕРЕСОЗДАН: fresh_password789
```

## Безопасность
⚠️ **Внимание**: Файл `pass.txt` содержит пароли в открытом виде. Обеспечьте безопасность файла:
- Ограничьте доступ к файлу
- Регулярно архивируйте и удаляйте старые записи
- Не передавайте файл третьим лицам

## Техническая реализация
- Все функции используют единый механизм записи
- Путь к файлу: `os.path.join(project_root, 'pass.txt')`
- Запись происходит после успешного изменения пароля в базе данных
- Используется кодировка UTF-8 для корректного отображения русских символов 